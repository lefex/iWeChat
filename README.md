![](https://github.com/lefex/iWeChat/blob/master/image/bannel.png?raw=true)



- [ğŸ¶åˆè¡·](https://github.com/lefex/iWeChat#%E5%88%9D%E8%A1%B7)

- [ğŸ±APPä¿¡æ¯](https://github.com/lefex/iWeChat#app%E4%BF%A1%E6%81%AF)
  - [ğŸ’¯ç ¸å£³ - ipa è·å–](https://github.com/lefex/iWeChat#app%E4%BF%A1%E6%81%AF)
  - [ğŸ’¯æ‰‹æœºè¶Šç‹±]()
  - [ğŸ’¯å¤´æ–‡ä»¶](https://github.com/lefex/iWeChat#%E5%A4%B4%E6%96%87%E4%BB%B6)
  - [ğŸ’¯ç¬¬ä¸‰æ–¹åº“](https://github.com/lefex/iWeChat#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93)
  - [ğŸ’¯UI](https://github.com/lefex/iWeChat#ui)
  - [ğŸ’¯ç»§æ‰¿å±‚çº§](https://github.com/lefex/iWeChat#%E7%BB%A7%E6%89%BF%E5%B1%82%E7%BA%A7)
  - [ğŸ’¯æ•°æ®åº“è®¾è®¡](https://github.com/lefex/iWeChat#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1)
  - [ğŸ’¯æ²™ç›’ç›®å½•](https://github.com/lefex/iWeChat#%E6%B2%99%E7%9B%92%E7%9B%AE%E5%BD%95)
  - [ğŸ’¯Pod é›†æˆ](https://github.com/lefex/iWeChat#pod-%E9%9B%86%E6%88%90)
  - [ğŸ’¯æŸ¥çœ‹ç½‘ç»œè¯·æ±‚æ•°æ®](https://github.com/lefex/iWeChat#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE)
  - [ğŸ’¯æŸ¥çœ‹åŠ¨æ€åº“](https://github.com/lefex/iWeChat#%E6%9F%A5%E7%9C%8B%E5%8A%A8%E6%80%81%E5%BA%93)

- [ğŸ°å·¥å…·ä½¿ç”¨è¯´æ˜](https://github.com/lefex/iWeChat#%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E)
  - [ğŸ’¯CaptainHook Hook ä»£ç ](https://github.com/lefex/iWeChat#captainhook-hook-%E4%BB%A3%E7%A0%81)
  - [ğŸ’¯Logos è¯­æ³•](https://github.com/lefex/iWeChat#logos-%E8%AF%AD%E6%B3%95)
  - [ğŸ’¯æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶æŠ€å·§](https://github.com/lefex/iWeChat#%E6%9F%A5%E6%89%BE%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E6%8A%80%E5%B7%A7)
  - [ğŸ’¯class-dump ä½¿ç”¨](https://github.com/lefex/iWeChat#class-dump-%E4%BD%BF%E7%94%A8)
  - [ğŸ’¯Cycriptè°ƒè¯•ç¨‹åº](https://github.com/lefex/iWeChat#cycript%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F)
  - [ğŸ’¯MachOView](https://github.com/lefex/iWeChat#machoview)
  - [ğŸ’¯åœ¨ Cycript å’Œ LLDB ä¸­ä½¿ç”¨ç§æœ‰çš„æ–¹æ³•è°ƒè¯• iOS](https://github.com/lefex/iWeChat#%E5%9C%A8-cycript-%E5%92%8C-lldb-%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%A7%81%E6%9C%89%E7%9A%84%E6%96%B9%E6%B3%95%E8%B0%83%E8%AF%95-ios)
  - [ğŸ’¯ä½¿ç”¨ NSInvocation è°ƒç”¨æ–¹æ³•](https://github.com/lefex/iWeChat#%E4%BD%BF%E7%94%A8-nsinvocation-%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95)
  - [ğŸ’¯ æŸ¥çœ‹Appä¸­çš„å­—ç¬¦ä¸²]()
  - [ğŸ’¯ UIDebug å·¥å…·](https://github.com/lefex/iWeChat#-uidebug-%E5%B7%A5%E5%85%B7)

- [ğŸ¼ä¸šåŠ¡é€»è¾‘](https://github.com/lefex/iWeChat#%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91)
  - [ğŸ’¯è¿˜åŸæŸäº›UIçš„è®¾è®¡](https://github.com/lefex/iWeChat#%E8%BF%98%E5%8E%9F%E6%9F%90%E4%BA%9Bui%E7%9A%84%E8%AE%BE%E8%AE%A1)
  - [ğŸ’¯æ¢ç´¢å„ä¸ªæ¨¡å—ä¸šåŠ¡é€»è¾‘](https://github.com/lefex/iWeChat#%E6%8E%A2%E7%B4%A2%E5%90%84%E4%B8%AA%E6%A8%A1%E5%9D%97%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91)
  - [ğŸ’¯æ¶ˆæ¯ç±»å‹](https://github.com/lefex/iWeChat#%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B)
  - [ğŸ’¯æ–‡ä»¶è¯´æ˜](https://github.com/lefex/iWeChat#%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E)

- [ğŸ¦é”™è¯¯æ€»ç»“](https://github.com/lefex/iWeChat#%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93)
  - [æ–°å»ºæ–‡ä»¶åæŠ¥é”™]()
  - [ä¿®æ”¹ç”µè„‘æ—¶é—´è¿è¡ŒæŠ¥é”™]()

- [ğŸ™ˆç›¸å…³æ¨è](https://github.com/lefex/iWeChat#%E5%A5%BD%E6%96%87%E6%8E%A8%E8%8D%90)

- [ğŸ¯è”ç³»ä¿¡æ¯](https://github.com/lefex/iWeChat#%E8%81%94%E7%B3%BB%E4%BF%A1%E6%81%AF)

## ğŸ¶åˆè¡·

é€šè¿‡è¿™ä¸ªé¡¹ç›®å­¦ä¼šå¦‚ä½•åˆ†æä¸€ä¸ªç¬¬ä¸‰æ–¹ APPã€‚å…³äºæˆ‘çš„æ›´å¤šä¿¡æ¯ï¼Œæ‰«ç å…³æ³¨ ç´ ç‡•ï¼š

![](https://upload-images.jianshu.io/upload_images/1664496-1471f633bfc7d877.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ğŸ±APPä¿¡æ¯

#### ğŸ’¯ç ¸å£³ - ipa è·å–

é¦–å…ˆç¬¬ä¸€æ­¥æ˜¯è·å–ä¸€ä¸ªç ´è§£çš„ ipa åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å‡ ç§æ–¹å¼è·å–ï¼š

- æ–¹å¼ä¸€ï¼šiTunes

è‹¹æœæ—¢ç„¶åœ¨é«˜ç‰ˆæœ¬çš„ iTunes å–æ¶ˆäº†è·å– ipa åŒ…çš„å…¥å£ï¼Œé‚£æˆ‘ä»¬å°±æƒ³åŠæ³•é™çº§å¤„ç†ã€‚éœ€è¦ä¸‹è½½ä½ç‰ˆæœ¬çš„ iTunesã€‚ [ä¸‹è½½](http://secure-appldnld.apple.com/itunes12/091-33628-20170922-EF8F0FE4-9FEF-11E7-B113-91CF9A97A551/iTunes12.6.3.dmg)ã€‚

ä¸‹è½½å®Œåï¼Œå®‰è£…ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™æŒ‰ä½ option é”®ï¼Œè¿™æ ·æ‰ä¸ä¼šæŠ¥é”™ï¼Œå®‰è£…å®Œæˆåï¼Œå³å¯ä¸‹è½½åº”ç”¨çš„ ipa åŒ…ã€‚ä¸‹è½½å®Œæˆåï¼Œåœ¨åº”ç”¨çš„å›¾æ ‡ä¸ŠæŒ‰å³é”®ï¼Œshow in finder å³å¯æ‰¾åˆ° ipa åŒ…ã€‚

![](https://github.com/awesome-tips/iOS-Tips/blob/master/images/2018/06/4-1.jpg)

- æ–¹å¼äºŒï¼šppåŠ©æ‰‹

ç”µè„‘å®‰è£…ä¸€ä¸ª ppåŠ©æ‰‹å®¢æˆ·ç«¯ï¼Œç›´æ¥ä¸‹è½½è¶Šç‹±åº”ç”¨ï¼Œä¸‹è½½å®Œæˆåï¼Œå³å¯åœ¨â€œæœ¬åœ°åº”ç”¨â€ä¸­æ‰¾æ‰“ APP çš„ ipa åŒ…ã€‚éœ€è¦å¼ºè°ƒä¸€ç‚¹ï¼Œè¿™ç§æ–¹å¼ä¸‹è½½çš„åº”ç”¨æ˜¯è§£å¯†åçš„ ipaã€‚

![](https://github.com/awesome-tips/iOS-Tips/blob/master/images/2018/06/4-2.jpg)

- æ–¹å¼ä¸‰ï¼šæŠ“åŒ…

åœ¨ Mac ä¸­çš„ iTunes ä¸­ä¸‹è½½åº”ç”¨ï¼Œé€šè¿‡ Charles æŠ“åŒ…è·å–åˆ° ipa åŒ…çš„ä¸‹è½½åœ°å€ï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä¸‹è½½ï¼Œä¸‹è½½åœ°å€æ˜¯åœ¨ p52-buy.itunes è¿™ä¸ªåŸŸåä¸‹ã€‚

è·å–åˆ° ipa åŒ…åå°±éœ€è¦ç ¸å£³ã€‚å¦‚æœä»è¶Šç‹±åŠ©æ‰‹ä¸Šä¸‹è½½çš„åˆ™ä¸éœ€è¦ç ¸å£³ã€‚

#### ğŸ’¯æ‰‹æœºè¶Šç‹±

æˆ‘ä½¿ç”¨çš„æ˜¯[å‰å‰è¶Šç‹±åŠ©æ‰‹](https://jb.xxzhushou.cn/)ï¼ŒæŒ‰ç…§ä»–çš„æµç¨‹ï¼Œå³å¯å®Œæˆè¶Šç‹±ã€‚å®‰è£…å®Œæˆä¼šå‡ºç° Cydia è¿™ä¸ªåº”ç”¨ï¼Œä½ å¯ä»¥ç†è§£æˆå®ƒæ˜¯è¶Šç‹±åº”ç”¨å•†åº—ã€‚æœ‰æ—¶å€™æ¯”è¾ƒå‘ï¼Œè¶Šç‹±æ—¶å¯èƒ½ä¼šå‡ºç°é»‘å±ã€‚

éœ€è¦å®‰è£… [Cydia Impactor](http://www.cydiaimpactor.com/) è¿™é‡Œç”¨æ¥å®‰è£…è½¯ä»¶ï¼Œä¸‹è½½å®Œæˆåï¼Œéœ€è¦æŠŠä½ æ‰€éœ€è¦çš„å®‰è£…åŒ…æ‹–åˆ° Cydia Impactorï¼Œå®‰è£…è¿‡ç¨‹ä¸­å¦‚æœæ²¡æœ‰å‡ºç°é”™è¯¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚

```js
// åº”ç”¨ä¼šæŠ¥é”™åˆ°è¿™ä¸ªç›®å½•ä¸‹
/var/mobile/Containers/Data/Application/
```



ç™»å½•

```
å®‰è£… OpenSSL(åœ¨Cydiaä¸­å®‰è£…)
sudo ssh root@172.24.94.140
<!--ä¿®æ”¹å¯†ç é»˜è®¤ä¸º alpine ä¸º (q--4)-->
TCZYde-iPhone:~ root# passwd
```

#### ğŸ’¯å¤´æ–‡ä»¶

**å¤´æ–‡ä»¶å¯¼å‡º**

> This is a command-line utility for examining the Objective-C runtime information stored in Mach-O files. It generates declarations for the classes, categories and protocols. This is the same information provided by using â€˜otool -ovâ€™, but presented as normal Objective-C declarations, so it is much more compact and readable.


[class-dump](https://github.com/nygard/class-dump) è¿™ä¸ªå·¥å…·ç”¨æ¥æŸ¥çœ‹æŸä¸ªAPPçš„å¤´æ–‡ä»¶ã€‚åªéœ€è¦æ‰¾åˆ°ç¬¬ä¸‰æ–¹APPçš„ xxx.app æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ class-dump å‘½ä»¤å³å¯ã€‚ä¸è¿‡åœ¨æ‰§è¡Œ class-dump å‘½ä»¤å‰ï¼Œéœ€è¦ç¡®ä¿ xxx.app æ˜¯ç ¸è¿‡å£³çš„ï¼Œä» APPStoreä¸‹è½½çš„ xxx.app æ–‡ä»¶æ˜¯ç»è¿‡åŠ å¯†å¤„ç†çš„ï¼Œå¯ä»¥ç›´æ¥ä»å„å¤§è¶Šç‹±å¸‚åœºä¸Šä¸‹è½½ç¬¬ä¸‰æ–¹ xxx.app æ–‡ä»¶ï¼Œä»è¶Šç‹±å¸‚åœºä¸‹è½½çš„ xxx.app å·²è¢«ç ´è§£ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ class-dump å¯¼å‡ºå¤´æ–‡ä»¶ã€‚



ä¸‹è½½ class-dump åæŠŠ class-dump å¯¼å…¥ `/usr/local/bi` ç›®å½•ä¸‹ï¼Œå¹¶æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š

```
sudo chmod 777/usr/local/bin/class-dump
```

æ‰§è¡Œ class-dump å‘½ä»¤ï¼š

```
class-dump -H [xxx.appæ‰€åœ¨çš„ä½ç½®] -o [å¤´æ–‡ä»¶å¯¼å‡ºçš„ä½ç½®]

æ¯”å¦‚ï¼š
class-dump -H Lefex.app -o lefexheader

class-dump -H /Users/daredos/Desktop/å¾®ä¿¡-6.3.23\(è¶Šç‹±åº”ç”¨\)/Payload/WeChat.app  -o /Users/daredos/Desktop/w
```

ä½¿ç”¨ class-dump å‘½ä»¤å¯¼å‡ºå¤´æ–‡ä»¶æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ä¸ç®¡ .h è¿˜æ˜¯ .m æ–‡ä»¶ä¸­çš„å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè¢«å¯¼å‡ºï¼›
- æŸä¸ªç±»çš„ç±»åˆ«ä¸­çš„æ–¹æ³•ä¹Ÿä¼šè¢«å¯¼å‡ºï¼Œå¯¼å‡ºåˆ°æºæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ ViewController (Navigation) ä¸­çš„æ–¹æ³•è¢«å¯¼å‡ºåˆ° ViewController ä¸­ï¼›
- å®ç°çš„åè®®ä¹Ÿä¼šè¢«å¯¼å‡ºï¼Œæ¯”å¦‚ ViewControllerDelegate çš„æ–¹æ³•è¢«å¯¼å‡ºåˆ° ViewController ä¸­ï¼Œå¦‚æœ ViewController ä¸å®ç° ViewControllerDelegate åè®®è®²ä¸ä¼šè¢«å¯¼å‡ºï¼›
- åè®®ä¸­å®šä¹‰çš„æ–¹æ³•ä¸ä¼šè¢«å¯¼å‡ºï¼Œåªä¼šå¯¼å‡ºåˆ°å®ç°åè®®çš„ç±»ä¸­ï¼›

**å¤´æ–‡ä»¶åˆ†ç±»**

æœ‰æ—¶å€™ä¸ºäº†åˆ†ææ–¹ä¾¿ï¼Œéœ€è¦æŠŠæ‰€æœ‰çš„å¤´æ–‡ä»¶åˆ†æˆä¸åŒçš„æ–‡ä»¶å¤¹å­˜æ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´æŠŠä»–ç»„ç»‡æˆæˆ‘ä»¬å¼€å‘ APP æ—¶çš„ç›®å½•ç»“æ„ã€‚è€Œå¾®ä¿¡çš„ç›®å½•ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š

æŠŠå¤´æ–‡ä»¶æŒ‰æ¨¡å—æ¥åˆ’åˆ†ï¼Œæœ€åèƒ½å‹¾å‹’å‡ºå¾®ä¿¡çš„æ•´ä½“é¡¹ç›®ç»“æ„æ”¾åˆ°ä¸»å·¥ç¨‹ä¸­ã€‚ç›®å‰å·²ç»å‹¾å‹’å‡ºå¾®ä¿¡çš„ç›®å½•ç»“æ„ï¼Œä¸è¿‡ä¸æ˜¯å¾ˆå…¨ã€‚[å‚è€ƒ](https://everettjf.com/2016/11/23/little-game-list-wechat-directory-tree/)

<img src="https://raw.githubusercontent.com/lefex/iWeChat/master/image/wechat_catagory.png" title="ç»§æ‰¿" width="300"/>

**MonkeyDevè‡ªåŠ¨å¯¼å‡ºå¤´æ–‡ä»¶**

å·¥ç¨‹å·²é›†æˆclass-dumpå¯¼å‡ºå¯æ‰§è¡Œæ–‡ä»¶OCå¤´æ–‡ä»¶çš„åŠŸèƒ½ï¼Œå¯åœ¨build settingsæœ€ä¸‹é¢å¼€å¯è¯¥åŠŸèƒ½ï¼Œåœ¨ User-Defined ä¸‹æ·»åŠ  MONKEYDEV_CLASS_DUMP å€¼ä¸º YESã€‚

#### ğŸ’¯ç¬¬ä¸‰æ–¹åº“

**åŸºäºè„šæœ¬**

ç ”ç©¶æŸä¸ªAPPæ—¶ï¼Œéœ€è¦äº†è§£å…¶ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œä½¿ç”¨ class-dump å¯¼å‡ºçš„å¤´æ–‡ä»¶éå¸¸å¤šï¼Œåˆšé è‚‰çœ¼æŸ¥çœ‹æ—¶ï¼Œè€—æ—¶è€—åŠ›ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œä¾¿å‘æ˜äº†è¿™ä¸ªå·¥å…·ã€‚ä¸‹é¢æ˜¯è·å–å¾®ä¿¡ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥æŸ¥çœ‹ pod åº“çš„ star æ•°ï¼Œæºåœ°å€ã€‚

æœ¬å·¥å…·åŸºäº python å†™çš„ï¼Œåœ¨[è¿™é‡Œ](https://github.com/lefex/iWeChat/blob/master/python)å¯ä»¥æ‰¾åˆ°æºç ã€‚ä¸‹è½½æºç åä¿®æ”¹ `file_catagory.py ` æ–‡ä»¶çš„ `IPA_HEADER_PATH` ä¸º class-dump å¯¼å‡ºçš„å¤´æ–‡ä»¶ç›®å½•ã€‚æ‰§è¡Œ `python file_catagory.py `

```
IPA_HEADER_PATH = '/Users/lefex/Desktop/header/xxx'
```

- [pop](https://github.com/facebook/pop.git) - (18872)
- [GPUImage](https://github.com/BradLarson/GPUImage.git) - (17338)
- [WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge.git) - (10649)
- [FBSDKCoreKit](https://github.com/facebook/facebook-ios-sdk.git) - (5894)
- [WCDB](https://github.com/Tencent/wcdb) - (5700)
- [GCDWebServer](https://github.com/swisspol/GCDWebServer.git) - (4011)
- [EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh.git) - (3336)
- [KSCrash](https://github.com/kstenerud/KSCrash.git) - (1942)
- [OpenUDID](https://github.com/ylechelle/OpenUDID.git) - (1909)
- [YYImage](https://github.com/ibireme/YYImage.git) - (1193)
- [SKBounceAnimation](https://github.com/khanlou/SKBounceAnimation.git) - (912)
- [YYAsyncLayer](https://github.com/ibireme/YYAsyncLayer.git) - (405)
- [NSTimer-Blocks](https://github.com/jivadevoe/NSTimer-Blocks.git) - (269)

å¦‚æœè¿˜æœ‰æ²¡å‘ç°çš„ç¬¬ä¸‰æ–¹åº“æ¬¢è¿æ [issues](https://github.com/lefex/iWeChat/issues)

**é€šè¿‡å¤´æ–‡ä»¶æœç´¢**

å¦‚æœAPPä½¿ç”¨äº†ä¸‰æ–¹åº“ï¼Œå¯ä»¥è¾“å…¥`PodsDummy`æ¥å¿«é€Ÿæ‰¾åˆ°ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“å’Œç§æœ‰åº“ï¼›

<img src="https://raw.githubusercontent.com/lefex/iWeChat/master/image/PodsDummy.png" title="ä¸‰æ–¹åº“" width="300"/>

#### ğŸ’¯UI 

é™¤äº†å¤´æ–‡ä»¶å¤–ï¼Œç ”ç©¶ç¬¬ä¸‰æ–¹ APP å¦ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹å°±æ˜¯æŸ¥çœ‹ UIã€‚å¯ä»¥ä½¿ç”¨ Reveal æŸ¥çœ‹è§†å›¾å±‚çº§ã€‚ä½¿ç”¨ `MonkeyDev` å¯ä»¥åœ¨éè¶Šç‹±çš„æ‰‹æœºä¸Šè¿è¡Œ Revealã€‚

MonkeyDev é»˜è®¤é›†æˆæ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œéœ€è¦æŠŠè‡ªå·±çš„ `RevealServer.framework`æ”¾åˆ°`/opt/MonkeyDev/frameworks`ä¸‹ï¼ˆæ‰“å¼€ Revealï¼Œç‚¹å‡» reveal - help - show reveal in finder å³å¯æ‰¾åˆ° RevealServer.frameworkï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥æŸ¥çœ‹æ—¶å›¾å±‚çº§ã€‚

å¦‚æœ Reveal è¿‡æœŸäº†ï¼Œç›´æ¥ä¿®æ”¹ç”µè„‘æ—¶é—´ä¸ºå¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚

![reveal.png](https://upload-images.jianshu.io/upload_images/1664496-77c7d397deb1bea3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



#### ğŸ’¯ç»§æ‰¿å±‚çº§

ä½¿ç”¨ python è„šæœ¬è½»æ¾æ‰¾å‡ºç»§æ‰¿å±‚çº§ï¼Œæ¯”å¦‚æˆ‘æƒ³æ‰¾å‡º `UIWindow` çš„ç»§æ‰¿å±‚çº§ç»“æ„ï¼Œåœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ° [pythonè„šæœ¬](https://github.com/lefex/iWeChat/tree/master/python)ï¼š

<img src="https://raw.githubusercontent.com/lefex/iWeChat/master/image/iwc_inherit.jpeg" title="ç»§æ‰¿" width="300"/>

#### ğŸ’¯æ•°æ®åº“è®¾è®¡

æ•°æ®åº“çš„ç»“æ„æ˜¯ä»€ä¹ˆï¼Œå„ä¸ªè¡¨ä¹‹é—´æ˜¯å¦‚ä½•å…³è”çš„ï¼Œè¡¨ä¸­ä¿å­˜çš„æ•°æ®æ˜¯ä»€ä¹ˆã€‚

**å¥½å‹è¡¨ï¼ˆFriendï¼‰**ï¼šæ¯ä¸ªå¥½å‹ï¼ŒåŒ…å«ç¾¤ä¸»ï¼Œå…¬ä¼—å·éƒ½ä¼šä¿å­˜åˆ°è¿™å¼ è¡¨ä¸­

```
CREATE TABLE Friend (
    userName           TEXT    PRIMARY KEY,
    type               INTEGER DEFAULT 0,
    certificationFlag  INTEGER DEFAULT 0,
    imgStatus          INTEGER DEFAULT 0,
    encodeUserName     TEXT,
    dbContactLocal     BLOB,
    dbContactOther     BLOB,
    dbContactRemark    BLOB,
    dbContactHeadImage BLOB,
    dbContactProfile   BLOB,
    dbContactSocial    BLOB,
    dbContactChatRoom  BLOB,
    dbContactBrand     BLOB
);
```

**æ¶ˆæ¯è¡¨ï¼ˆChat_xxxxxxxxxxxxï¼‰**ï¼š æ¯ä¸€ä¸ªä¼šè¯ä¼šç”Ÿæˆä¸€å¼ è¡¨

````
CREATE TABLE Chat_099cc67071b64517d719cdb9430037d8 (
    TableVer   INTEGER DEFAULT 1,
    MesLocalID INTEGER PRIMARY KEY AUTOINCREMENT,
    MesSvrID   INTEGER DEFAULT 0,
    CreateTime INTEGER DEFAULT 0,
    Message    TEXT,
    Status     INTEGER DEFAULT 0,
    ImgStatus  INTEGER DEFAULT 0,
    Type       INTEGER,
    Des        INTEGER
);
````

**æ¶ˆæ¯æ’¤å›è¡¨ï¼ˆRevokeMsgTableï¼‰**

```
CREATE TABLE RevokeMsgTable (
    MSG_REVOKE_COL_SVRID   INTEGER DEFAULT 0
                                   PRIMARY KEY,
    MSG_REVOKE_COL_CONTENT TEXT,
    MSG_REVOKE_COL_INTRES1 INTEGER DEFAULT 0,
    MSG_REVOKE_COL_INTRES2 INTEGER DEFAULT 0,
    MSG_REVOKE_COL_INTRES3 INTEGER DEFAULT 0,
    MSG_REVOKE_COL_STRRES1 TEXT,
    MSG_REVOKE_COL_STRRES2 TEXT,
    MSG_REVOKE_COL_STRRES3 TEXT
);
```

#### ğŸ’¯æ²™ç›’ç›®å½•

æ²™ç›’ç›®å½•ç»“æ„æ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ä¿å­˜äº†é‚£äº›æ•°æ®ã€‚éè¶Šç‹±æ‰‹æœºï¼Œé€šè¿‡Xcodeç›´æ¥å¯¼å‡ºï¼ˆwindows->devices and simulators - è®¾ç½®æŒ‰é’® - Download Container ...ï¼‰ï¼Œè¿™ä¸ªæ—¶é—´æ¯”è¾ƒé•¿ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ã€‚

![](https://github.com/lefex/iWeChat/blob/master/image/wc_sandbox.png?raw=true)

**ä½¿ç”¨iFunBoxå·¥å…·**

è¿™ä¸ªå·¥å…·æ¯”è¾ƒå¼ºå¤§ï¼Œå¯ä»¥ç›´æ¥æŠŠè¶Šç‹±è®¾å¤‡çš„å†…å®¹æ‹·è´åˆ°ç”µè„‘ä¸Šï¼Œä¸€å›¾èƒœåƒè¨€ï¼Œç›´æ¥çœ‹å›¾å§ã€‚

![](https://github.com/lefex/iWeChat/blob/master/image/ifunbox.png?raw=true)



#### ğŸ’¯Pod é›†æˆ

å¦‚æœæƒ³ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å’‹ä¹ˆåŠï¼Ÿç›´æ¥é€šè¿‡ `pod init`ï¼Œç„¶ååœ¨ `Podfile` é‡Œæ·»åŠ ä½ æƒ³ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“å³å¯ã€‚

```
target 'xxxDylib' do
  # Uncomment the next line if you're using Swift or would like to use dynamic frameworks
  # use_frameworks!

  # Pods for KuaiXuoyeDylib
  pod 'xxx'


end
```

#### ğŸ’¯æŸ¥çœ‹ç½‘ç»œè¯·æ±‚æ•°æ®

æœ‰æ—¶å€™æƒ³å¿«é€Ÿåœ°æŸ¥çœ‹æŸä¸ª APP ä¸­çš„ç½‘ç»œè¯·æ±‚ç»“æœï¼ŒæŠ“åŒ…å¯èƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†æ˜¯é‡åˆ°HTTPSçš„è¯·æ±‚ï¼Œå°±æ¯”è¾ƒè´¹äº‹ã€‚å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡é€†å‘æ¥æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š

- æ‰¾åˆ°æŸä¸ªåº”ç”¨ä¸­ç½‘ç»œè¯·æ±‚çš„ç»Ÿä¸€å‡ºå£ï¼Œç„¶å Hook æ‰è¿™ä¸ªæ–¹æ³•ï¼Œç›´æ¥æ‹¿åˆ°æ•°æ®ã€‚ä¸è¿‡æ‰¾åˆ° APP ç½‘ç»œè¯·æ±‚å°è£…çš„ç±»æœ‰æ—¶å€™æ¯”è¾ƒéš¾ã€‚æ•™ä½ ä¸€æ‹›ï¼Œéå¸¸å®¹æ˜“ï¼Œæ‰¾åˆ°æŸä¸ªé¡µé¢ä¸­å«æœ‰ç½‘ç»œè¯·æ±‚çš„ç±»ï¼Œä½¿ç”¨ Hopper å·¥å…·æŸ¥çœ‹ä¼ªä»£ç ï¼Œéå¸¸å®¹æ˜“å®šä½å…·ä½“çš„ç½‘ç»œè¯·æ±‚ç±»ï¼›
- ä½¿ç”¨ç½‘ç»œå·¥å…·ç›´æ¥é›†æˆåˆ°ç¬¬ä¸‰æ–¹APPä¸­ï¼Œé€šè¿‡å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œæ¨è[Flex](https://github.com/Flipboard/FLEX)ï¼Œå®ƒå¯ä»¥æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼›

#### ğŸ’¯æŸ¥çœ‹åŠ¨æ€åº“

é€šè¿‡ `otool` å¯ä»¥æŸ¥çœ‹Appä½¿ç”¨çš„åŠ¨æ€åº“ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹å¾®ä¿¡ä½¿ç”¨äº†å“ªäº›åŠ¨æ€åº“ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ `otool -L WeChat ->~/Desktop/wechat.log`ï¼Œåœ¨æ¡Œé¢æ‰“å¼€ `wechat.log` æ–‡ä»¶ï¼Œå³å¯çœ‹åˆ°å¾®ä¿¡ä½¿ç”¨çš„æ‰€æœ‰åŠ¨æ€åº“ã€‚[å‚è€ƒçŸ¥è¯†å°é›†](<https://m.weibo.cn/1645958062/4321387470442189>)ã€‚

æ„å¤–å‘ç°äº† [Matrix.framework]( https://github.com/Tencent/matrix) è¿™ä¸ªåŠ¨æ€åº“ï¼Œåˆšå¥½å‰å‡ å¤©å¾®ä¿¡å›¢é˜Ÿå¼€æºäº† [Matrix]( https://github.com/Tencent/matrix)ï¼Œçœ‹å®ƒçš„æè¿°ï¼š

> **Matrix** æ˜¯ä¸€æ¬¾å¾®ä¿¡ç ”å‘å¹¶æ—¥å¸¸ä½¿ç”¨çš„ APMï¼ˆApplication Performance Manageï¼‰ï¼Œå½“å‰ä¸»è¦è¿è¡Œåœ¨ Android å¹³å°ä¸Šã€‚
> Matrix çš„ç›®æ ‡æ˜¯å»ºç«‹ç»Ÿä¸€çš„åº”ç”¨æ€§èƒ½æ¥å…¥æ¡†æ¶ï¼Œé€šè¿‡å„ç§æ€§èƒ½ç›‘æ§æ–¹æ¡ˆï¼Œå¯¹æ€§èƒ½ç›‘æ§é¡¹çš„å¼‚å¸¸æ•°æ®è¿›è¡Œé‡‡é›†å’Œåˆ†æï¼Œè¾“å‡ºç›¸åº”çš„é—®é¢˜åˆ†æã€å®šä½ä¸ä¼˜åŒ–å»ºè®®ï¼Œä»è€Œå¸®åŠ©å¼€å‘è€…å¼€å‘å‡ºæ›´é«˜è´¨é‡çš„åº”ç”¨ã€‚

è¯´æ˜iOSä¸­ä¹Ÿç”¨äº†[Matrix]( https://github.com/Tencent/matrix)ï¼Œä»”ç»†çœ‹äº†ä¸‹å®ƒçš„æ–‡æ¡£å‘ç°ï¼Œæœ‰ä¸ª[SQLite Lint]( https://github.com/Tencent/matrix#sqlite-lint-1) ç”¨æ¥æµ‹è¯• SQL è¯­å¥çš„æ€§èƒ½éšæ‚£ï¼Œå®ƒåº•å±‚æ˜¯ C++ å®ç°ï¼Œæ”¯æŒå¤šå¹³å°æ‰©å±•ã€‚--- (**çº¯å±çŒœæµ‹**)

**ç¬¬ä¸‰æ–¹**

```ruby
@rpath/TXLiteAVSDK_Smart_No_VOD.framework/TXLiteAVSDK_Smart_No_VOD
@rpath/Matrix.framework/Matrix
@rpath/YTFaceProSDK.framework/YTFaceProSDK 
@rpath/GPUImage.framework/GPUImage
@rpath/WCDB.framework/WCDB
@rpath/MMCommon.framework/MMCommon 
@rpath/MultiMedia.framework/MultiMedia 
@rpath/QBar.framework/QBar 
@rpath/QMapKit.framework/QMapKit
@rpath/ConfSDK.framework/ConfSDK
@rpath/mars.framework/mars 
```

**ç³»ç»Ÿ Framework**

```ruby
/System/Library/Frameworks/
Contacts.framework/Contacts
CallKit.framework/CallKit
Accelerate.framework/Accelerate
Intents.framework/Intents
JavaScriptCore.framework/JavaScriptCore
MultipeerConnectivity.framework/MultipeerConnectivity
UserNotifications.framework/UserNotifications
WatchKit.framework/WatchKit
VideoToolbox.framework/VideoToolbox
CoreSpotlight.framework/CoreSpotlight
PushKit.framework/PushKit
WebKit.framework/WebKit
WatchConnectivity.framework/WatchConnectivity
NetworkExtension.framework/NetworkExtension
ContactsUI.framework/ContactsUI
HealthKit.framework/HealthKit
LocalAuthentication.framework/LocalAuthentication
Photos.framework/Photos
AdSupport.framework/AdSupport
ExternalAccessory.framework/ExternalAccessory
CoreBluetooth.framework/CoreBluetooth
Security.framework/Security
OpenAL.framework/OpenAL
CoreText.framework/CoreText
CoreTelephony.framework/CoreTelephony
StoreKit.framework/StoreKit
Accounts.framework/Accounts
Social.framework/Social
GLKit.framework/GLKit
MediaPlayer.framework/MediaPlayer
CoreMotion.framework/CoreMotion
ImageIO.framework/ImageIO
AssetsLibrary.framework/AssetsLibrary
AVFoundation.framework/AVFoundation
MessageUI.framework/MessageUI
Foundation.framework/Foundation
UIKit.framework/UIKit
AddressBookUI.framework/AddressBookUI
AddressBook.framework/AddressBook
CoreLocation.framework/CoreLocation
CoreVideo.framework/CoreVideo
CFNetwork.framework/CFNetwork
MobileCoreServices.framework/MobileCoreServices
CoreGraphics.framework/CoreGraphics
CoreMedia.framework/CoreMedia
QuartzCore.framework/QuartzCore
SystemConfiguration.framework/SystemConfiguration
AudioToolbox.framework/AudioToolbox
OpenGLES.framework/OpenGLES
MapKit.framework/MapKit
CoreFoundation.framework/CoreFoundation
CoreImage.framework/CoreImage
```

**dylib**

```ruby
/usr/lib/libxml2.2.dylib
/usr/lib/libc++.1.dylib
/usr/lib/libsqlite3.dylib
/usr/lib/libbz2.1.0.dylib
/usr/lib/libresolv.9.dylib
/usr/lib/libiconv.2.dylib
/usr/lib/libz.1.dylib
/usr/lib/libicucore.A.dylib
/usr/lib/libobjc.A.dylib
/usr/lib/libSystem.B.dylib
```





## ğŸ°å·¥å…·ä½¿ç”¨è¯´æ˜

#### ğŸ’¯CaptainHook Hook ä»£ç 

```objective-c
// æ— å‚æ•°
CHDeclareClass(WCActionSheet)
CHOptimizedMethod0(self, NSArray *, WCActionSheet, buttonTitleList){
    NSArray *titles = CHSuper0(WCActionSheet, buttonTitleList);
    return titles;
}

CHConstructor{
    CHLoadLateClass(WCActionSheet);
    CHClassHook0(WCActionSheet, buttonTitleList);
}
```

```objective-c
// ä¸€ä¸ªå‚æ•°
CHDeclareClass(MMUIImageView);
CHOptimizedMethod1(self, void, MMUIImageView, setImage, NSString *, imageurl){
    NSLog(@"setImage: %@", imageurl);
    CHSuper1(MMUIImageView, setImage, imageurl);
}
CHConstructor{    
    CHLoadLateClass(MMUIImageView);
    CHClassHook1(MMUIImageView, setImage);
}
```

```objective-c
@interface Lefex : NSObject
@property (nonatomic, copy) NSString *city;
+ (Lefex *)empty;
- (void)updateNickName:(NSString *)nickName;
- (void)updateNickName:(NSString *)nickName age:(int)age;
- (void)requestNickNameForId:(NSString *)userId completion:(void(^)(NSString *))block;

@end
```

```objective-c
@synthesize city = _city;

@implementation Lefex

+ (Lefex *)empty {
    NSLog(@"orgin - %@", NSStringFromSelector(_cmd));
    return [Lefex new];
}

- (void)updateNickName:(NSString *)nickName {
    NSLog(@"orgin - %@", NSStringFromSelector(_cmd));
}

- (void)updateNickName:(NSString *)nickName age:(int)age {
    NSLog(@"orgin - %@", NSStringFromSelector(_cmd));
}

- (void)requestNickNameForId:(NSString *)userId completion:(void(^)(NSString *))block {
    NSLog(@"orgin - %@", NSStringFromSelector(_cmd));
    if (block) {
        block(@"lefe_x");
    }
}

- (void)setCity:(NSString *)city {
    _city = city;
}

- (NSString *)city {
    return _city;
}

@end
```



```objective-c
typedef void(^RequestBlock)(NSString *);

// hookæŸä¸ªç±»æ—¶éœ€è¦å…ˆå£°æ˜
CHDeclareClass(Lefex)

// Hook ç±»æ–¹æ³•
CHOptimizedClassMethod0(self, Lefex *, Lefex, empty){
    Lefex *me = CHSuper0(Lefex, empty);
    NSLog(@"Hook empty");
    return me;
}

// Hook ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•
CHOptimizedMethod1(self, void, Lefex, updateNickName, NSString *, name) {
    CHSuper1(Lefex, updateNickName, name);
    NSLog(@"hook updateNickName");
}

// Hookå±æ€§ï¼Œhookå¯¹åº”çš„getå’Œsetæ–¹æ³•
// hook set æ–¹æ³•
CHOptimizedMethod1(self, void, Lefex, setCity, NSString *, city) {
    CHSuper1(Lefex, setCity, @"BeiJing");
    NSLog(@"hook setCity");
}

// hook get æ–¹æ³•
CHOptimizedMethod0(self, void, Lefex, city) {
    NSLog(@"hook city");
    return CHSuper0(Lefex, city);
}

// Hook ä¸¤ä¸ªå‚æ•°çš„æ–¹æ³•
CHOptimizedMethod2(self, void, Lefex, updateNickName, NSString *, name, age, int, age) {
    CHSuper2(Lefex, updateNickName, name, age, age);
    NSLog(@"hook updateNickName: age");
}

// Hook å¸¦æœ‰blockçš„æ–¹æ³•ï¼Œéœ€è¦çŸ¥é“ block ä¸­çš„å‚æ•°ä¸ªæ•°
CHOptimizedMethod2(self, void, Lefex, requestNickNameForId, NSString *, userId, completion, RequestBlock, block) {
    RequestBlock nicknameBlock = ^(NSString *nickname) {
        NSLog(@"hook callback :%@", nickname);
        if (block) {
            block(nickname);
        }
    };
    
    CHSuper2(Lefex, requestNickNameForId, userId, completion, nicknameBlock);
    NSLog(@"hook requestNickNameForId: age");
}

// Hook å‚æ•°æ˜¯äºŒçº§æŒ‡é’ˆçš„æ–¹æ³•
CHOptimizedMethod1(self, void, Lefex, queryLocation, NSString **, name) {
    CHSuper1(Lefex, queryLocation, name);
    NSLog(@"hook queryLocation: %@", *name);
}

CHConstructor {
    // å¯¼å…¥ç±»æ‰èƒ½å¤Ÿä½¿ç”¨
    // linkable
    CHLoadClass(Lefex);
    // un linkable
//    CHLoadLateClass(Lefex);

    CHClassHook1(Lefex, setCity);
    CHClassHook0(Lefex, city);
    CHClassHook0(Lefex, empty);
    CHClassHook1(Lefex, updateNickName);
    CHClassHook2(Lefex, updateNickName, age);
    CHClassHook2(Lefex, requestNickNameForId, completion);
    CHClassHook1(Lefex, queryLocation);
}
```

```verilog
2018-12-12 21:03:13.378534+0800 CaptainDemo[43777:862109] orgin - empty
2018-12-12 21:03:13.378682+0800 CaptainDemo[43777:862109] Hook empty
2018-12-12 21:03:13.378822+0800 CaptainDemo[43777:862109] orgin - updateNickName:
2018-12-12 21:03:13.378919+0800 CaptainDemo[43777:862109] hook updateNickName
2018-12-12 21:03:13.379002+0800 CaptainDemo[43777:862109] orgin - updateNickName:age:
2018-12-12 21:03:13.379097+0800 CaptainDemo[43777:862109] hook updateNickName: age
2018-12-12 21:03:13.379220+0800 CaptainDemo[43777:862109] orgin - requestNickNameForId:completion:
2018-12-12 21:03:13.379299+0800 CaptainDemo[43777:862109] hook callback :lefe_x
2018-12-12 21:03:13.379374+0800 CaptainDemo[43777:862109] orgin callback lefe_x
2018-12-12 21:03:13.379440+0800 CaptainDemo[43777:862109] hook requestNickNameForId: age
2018-12-12 21:03:13.379513+0800 CaptainDemo[43777:862109] orgin - queryLocation:
2018-12-12 21:03:13.379582+0800 CaptainDemo[43777:862109] hook queryLocation: BeiJing
2018-12-12 21:03:13.379670+0800 CaptainDemo[43777:862109] orgin loction: BeiJing
2019-04-02 10:20:10.415550+0800 CaptainDemo[3253:27954] orgin loction: BeiJing
2019-04-02 10:20:10.415732+0800 CaptainDemo[3253:27954] hook setCity
2019-04-02 10:20:10.415941+0800 CaptainDemo[3253:27954] hook city
```

#### ğŸ’¯Logos è¯­æ³•

http://iphonedevwiki.net/index.php/Logos

```objective-c
// è¦ hook çš„ç±»
%hook ClassName

// hook ç±»æ–¹æ³•
+ (id)sharedInstance
{
	%log;
	return %orig; // è°ƒç”¨åŸå®ç°
}

- (void)messageWithNoReturnAndOneArgument:(id)originalArgument
{
	%log;
    // è°ƒç”¨åŸå®ç°ï¼Œå¯ä»¥ä¿®æ”¹å‚æ•°
	%orig(originalArgument);
}

- (id)messageWithReturnAndNoArguments
{
	%log;

    // è°ƒç”¨åŸå®ç°ï¼ŒæŸ¥çœ‹è¿”å›å€¼ï¼Œä¿®æ”¹è¿”å›å€¼
	id originalReturnOfMessage = %orig;
	return originalReturnOfMessage;
}
// è¦æœ‰ç»“æŸæ ‡ç­¾
%end
```
#### ğŸ’¯è°ƒç”¨å¸¦æœ‰å‚æ•°ä¸ºblockçš„æ–¹æ³•

```objective-c
@interface NetworkTask : NSObject

- (void)requestComplete:(void(^)(NSString *name))completion;
- (void)requestID:(NSString *)docId domplete:(void(^)(NSString *name))completion failed:(void(^)(NSError *error))failed;

@end

// æ–¹æ³•ä¸€ï¼šåªæ”¯æŒä¸€ä¸ªå‚æ•°
- (void)runTaskForPerform {
    NSObject *task = [objc_getClass("NetworkTask") new];
    void(^completeBlock)(NSString *) = ^(NSString *name) {
        NSLog(@"block: %@", name);
    };
    [task performSelector:@selector(requestComplete:) withObject:completeBlock];
}

// æ–¹æ³•äºŒï¼šæ”¯æŒå¤šä¸ªå‚æ•°
- (void)runTask {
    NSObject *task = [objc_getClass("NetworkTask") new];
    SEL selector = NSSelectorFromString(@"requestID:domplete:failed:");
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[objc_getClass("NetworkTask") instanceMethodSignatureForSelector:selector]];
    [invocation setSelector:selector];
    [invocation setTarget:task];
    NSString *docId = @"123";
    [invocation setArgument:&docId atIndex:2];

    void(^completeBlock)(NSString *) = ^(NSString *name) {
        NSLog(@"block invocation: %@", name);
    };
    [invocation setArgument:&completeBlock atIndex:3];

    void(^fliedBlock)(NSError *) = ^(NSError *error) {
        NSLog(@"block invocation error: %@", error);
    };
    [invocation setArgument:&fliedBlock atIndex:4];
    [invocation invoke];
}

// æ–¹æ³•ä¸‰ï¼šæ”¯æŒå¤šä¸ªå‚æ•°
- (void)runTaskForMsgSend {
    NSString *docId = @"123";
    
    void(^completeBlock)(NSString *) = ^(NSString *name) {
        NSLog(@"block objc_msgSend: %@", name);
    };
    
    void(^filedBlock)(NSError *) = ^(NSError *error) {
        NSLog(@"block objc_msgSend error: %@", error);
    };
    NSObject *task = [objc_getClass("NetworkTask") new];
    SEL selector = NSSelectorFromString(@"requestID:domplete:failed:");

    ((void (*)(id, SEL, id, id, id, id))objc_msgSend)(task, selector, docId, completeBlock, filedBlock, NULL);
}
```

#### ğŸ’¯æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶æŠ€å·§

æ˜¾ç¤ºåŒ…å†…å®¹åï¼ŒæŒ‰ size å¤§å°æ’åˆ—æ–‡ä»¶ï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä¸€èˆ¬æ¯”è¾ƒå¤§ï¼Œåå­—å’ŒappåŒ…åå­—ä¸€è‡´ï¼ˆæœ‰æ—¶å€™ä¸ä¸€è‡´ï¼‰ï¼›

#### ğŸ’¯class-dump ä½¿ç”¨

æœ‰æ—¶å€™åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦äº›é»‘ç§‘æŠ€ï¼Œâ€œå·çª¥â€ç¬¬ä¸‰æ–¹APPä½¿ç”¨äº†å“ªäº›ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ–çŒœçŒœå®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå’‹ä¹ˆåŠï¼Ÿ

å…¶å®æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ class-dump è¿™ä¸ªå·¥å…·æŸ¥çœ‹æŸä¸ªAPPçš„å¤´æ–‡ä»¶ã€‚åªéœ€è¦æ‰¾åˆ°ç¬¬ä¸‰æ–¹APPçš„ xxx.app æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ class-dump å‘½ä»¤å³å¯ã€‚ä¸è¿‡åœ¨æ‰§è¡Œ class-dump å‘½ä»¤å‰ï¼Œéœ€è¦ç¡®ä¿ xxx.app æ˜¯ç ¸è¿‡å£³çš„ï¼Œä» APPStoreä¸‹è½½çš„ xxx.app æ–‡ä»¶æ˜¯ç»è¿‡åŠ å¯†å¤„ç†çš„ï¼Œå¯ä»¥ç›´æ¥ä»å„å¤§è¶Šç‹±å¸‚åœºä¸Šä¸‹è½½ç¬¬ä¸‰æ–¹ xxx.app æ–‡ä»¶ï¼Œä»è¶Šç‹±å¸‚åœºä¸‹è½½çš„ xxx.app å·²è¢«ç ´è§£ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ class-dump å¯¼å‡ºå¤´æ–‡ä»¶ã€‚

åˆ›å»ºä¸€ä¸ªDemoï¼Œç„¶åæ‰“åŒ…å¯¼å‡º ipa åŒ…ï¼Œæ‰¾åˆ° xxx.appï¼Œè¿™é‡Œ xxx.app æ˜¯æœªç»è¿‡åŠ å¯†çš„ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
@protocol ViewControllerDelegate<NSObject>
- (void)didRefreshDataSuccess;
@end

@interface ViewController : UIViewController

@property (nonatomic, weak) id<ViewControllerDelegate> delegate;
@property (nonatomic, copy) NSString *pubName;

- (void)pubLoadDataWithAlbumID:(NSString *)albumID count:(NSInteger *)count;

@end

@interface ViewController (Navigation)

- (void)setRightBarItemWithTitle:(NSString *)title;

@end
```

æ‰§è¡Œ class-dump å‘½ä»¤ï¼š

```
class-dump -H [xxx.appæ‰€åœ¨çš„ä½ç½®] -o [å¤´æ–‡ä»¶å¯¼å‡ºçš„ä½ç½®]

æ¯”å¦‚ï¼š
class-dump -H Lefex.app -o lefexheader
```

æœ€ç»ˆå¯¼å‡ºçš„å¤´æ–‡ä»¶å¦‚ä¸‹ï¼š

```
@class NSString;
@protocol ViewControllerDelegate;

@interface ViewController : UIViewController
{
    id <ViewControllerDelegate> _delegate;
    NSString *_pubName;
    NSString *_priName;
}

@property(copy, nonatomic) NSString *priName; // @synthesize priName=_priName;
@property(copy, nonatomic) NSString *pubName; // @synthesize pubName=_pubName;
@property(nonatomic) __weak id <ViewControllerDelegate> delegate; // @synthesize delegate=_delegate;
- (void).cxx_destruct;
- (void)didRefreshDataSuccess;
- (void)priLoadDataWithAlbumID:(id)arg1 count:(long long *)arg2;
- (void)pubLoadDataWithAlbumID:(id)arg1 count:(long long *)arg2;
- (void)viewDidLoad;
- (void)setRightBarItemWithTitle:(id)arg1;

@end
```

æ€»ç»“ï¼š

ä½¿ç”¨ class-dump å‘½ä»¤å¯¼å‡ºå¤´æ–‡ä»¶æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ä¸ç®¡ .h è¿˜æ˜¯ .m æ–‡ä»¶ä¸­çš„å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè¢«å¯¼å‡ºï¼›
- æŸä¸ªç±»çš„ç±»åˆ«ä¸­çš„æ–¹æ³•ä¹Ÿä¼šè¢«å¯¼å‡ºï¼Œå¯¼å‡ºåˆ°æºæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ ViewController (Navigation) ä¸­çš„æ–¹æ³•è¢«å¯¼å‡ºåˆ° ViewController ä¸­ï¼›
- å®ç°çš„åè®®ä¹Ÿä¼šè¢«å¯¼å‡ºï¼Œæ¯”å¦‚ ViewControllerDelegate çš„æ–¹æ³•è¢«å¯¼å‡ºåˆ° ViewController ä¸­ï¼Œå¦‚æœ ViewController ä¸å®ç° ViewControllerDelegate åè®®è®²ä¸ä¼šè¢«å¯¼å‡ºï¼›
- åè®®ä¸­å®šä¹‰çš„æ–¹æ³•ä¸ä¼šè¢«å¯¼å‡ºï¼Œåªä¼šå¯¼å‡ºåˆ°å®ç°åè®®çš„ç±»ä¸­ï¼›

å‚è€ƒï¼šhttp://stevenygard.com/projects/class-dump/

#### ğŸ’¯Cycriptè°ƒè¯•ç¨‹åº

è¯•æƒ³ä¸€ç§åœºæ™¯ï¼Œæˆ‘æƒ³çŸ¥é“æŸä¸ªç¬¬ä¸‰æ–¹ APP å½“å‰é¡µé¢å¯¹åº”çš„æ˜¯å“ªä¸ª VCï¼Œæƒ³è®©æŸä¸ªå®ä¾‹æ‰§è¡ŒæŸä¸ªå‡½æ•°åçš„æ•ˆæœï¼Œæ‰“å°å½“å‰çš„è§†å›¾å±‚çº§ï¼Œå’‹ä¹ˆåŠï¼Ÿ

å…¶å®ä½¿ç”¨ Cycript å³å¯è§£å†³è¿™å‡ ä¸ªé—®é¢˜ï¼ŒCycriptæ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œå¯ä»¥æŠŠæŸæ®µä»£ç æ³¨å…¥åˆ°æŸä¸ªè¿›ç¨‹ä¸­ã€‚æ¯”å¦‚æˆ‘å¯ä»¥æŠŠç”¨ Cycript ç¼–å†™çš„ä»£ç æ¤å…¥åˆ°ä¸€ä¸ªè¿è¡Œçš„ APP ä¸­ï¼Œè¿™æ · APP å°±å¯ä»¥æ‰§è¡Œæ³¨å…¥çš„ä»£ç ã€‚ä¸‹é¢çš„æµ‹è¯•éœ€è¦å®‰è£… MonkeyDevã€‚ 

å®‰è£… Cycript éå¸¸ç®€å•ï¼Œç›´æ¥ä¸‹è½½ Cycriptï¼Œå¹¶è¿›å…¥ Cycript ç›®å½•ä¸‹ï¼Œæ‰§è¡Œï¼š

`./cycript -r 192.168.10.111:6666`

192.168.10.111:6666 æ˜¯æ‰‹æœºipåœ°å€ï¼Œ6666æ˜¯é»˜è®¤çš„ç«¯å£ã€‚è¿æ¥æˆåŠŸåï¼Œæ§åˆ¶å°ä¼šæœ‰ï¼šcy#ã€‚éœ€è¦æ³¨æ„æ‰‹æœºå’Œç”µè„‘éœ€è¦ä½¿ç”¨åŒä¸€Wifiã€‚

1.å½“å‰é¡µé¢å¯¹åº”çš„æ˜¯å“ªä¸ª VC?

è·å–å½“å‰é¡µé¢æ˜¯å“ªä¸ªé¡µé¢æ—¶ï¼Œå¯ä»¥ç”¨åˆ°å“åº”é“¾çš„çŸ¥è¯†ã€‚å‡å¦‚SubjectViewControlleræœ‰ä¸€ä¸ª UITableViewï¼Œ å®ƒçš„å†…å­˜åœ°å€æ˜¯ 0x106a05c00 ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥é€šè¿‡ä¸‹åˆ—å‘½ä»¤æ‰¾åˆ°å½“å‰çš„VCã€‚

```
cy# [#0x106a05c00 nextResponder]
#"<UIView: 0x105d839d0; frame = (0 0; 375 667); autoresize = W+H; layer = <CALayer: 0x1c0635460>>"
cy# [#0x105d839d0 nextResponder]
#"<SubjectViewController: 0x106a0a200>"
```

2.æŸä¸ªå®ä¾‹æ‰§è¡ŒæŸä¸ªå‡½æ•°åçš„æ•ˆæœï¼Ÿ

`SubjectViewController` çš„å†…å­˜åœ°å€æ˜¯ `0x106a0a200`ï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢çš„è¿™æ¡æŒ‡ä»¤ï¼Œ`SubjectViewController` çš„æ ‡é¢˜ä¼šç«‹åˆ»å˜ä¸º `Lefe_x`ã€‚

`cy# [#0x106a0a200 setTitle: @"Lefe_x"]`

3.æ‰“å°å½“å‰çš„è§†å›¾å±‚çº§

ç›´æ¥æ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤å³å¯ã€‚

`[[UIApp keyWindow]recursiveDescription].toString()`

[å‚è€ƒ](http://www.cycript.org/)

#### ğŸ’¯MachOView

Mach-Oæ ¼å¼å…¨ç§°ä¸ºMach Objectæ–‡ä»¶æ ¼å¼çš„ç¼©å†™ï¼Œæ˜¯macä¸Šå¯æ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼ï¼Œç±»ä¼¼äºwindowsä¸Šçš„PEæ ¼å¼ (Portable Executable ), linuxä¸Šçš„elfæ ¼å¼ (Executable and Linking Format)ã€‚

MachOViewå·¥å…·å¯Macå¹³å°ä¸­å¯æŸ¥çœ‹MachOæ–‡ä»¶æ ¼å¼ä¿¡æ¯ï¼ŒIOSç³»ç»Ÿä¸­å¯æ‰§è¡Œç¨‹åºå±äºMach-Oæ–‡ä»¶æ ¼å¼

[MachOViewä¸‹è½½åœ°å€](https://sourceforge.net/projects/machoview/)

[github](https://github.com/gdbinit/MachOView)



#### ğŸ’¯åœ¨ Cycript å’Œ LLDB ä¸­ä½¿ç”¨ç§æœ‰çš„æ–¹æ³•è°ƒè¯• iOS

ä¸‹é¢è¿™äº›æ–¹æ³•å¯¹äºä½¿ç”¨ `Cycript` å’Œ `LLDB` è°ƒè¯•ç¬¬ä¸‰æ–¹åº”ç”¨éå¸¸æ–¹ä¾¿ï¼Œæ¯”å¦‚æƒ³æ‰“å°å½“å‰çš„è§†å›¾å±‚çº§ç»“æ„ï¼Œæ‰“å°æŸä¸ªç±»çš„å±æ€§ï¼Œæ–¹æ³•ï¼Œæ‰¾åˆ°å½“å‰æ˜¾ç¤ºçš„ `ViewController` ç­‰ã€‚å½“ç„¶ï¼Œåœ¨éé€†å‘çš„ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `performSelector:` æ‰§è¡Œï¼Œå¯ä»¥æŸ¥çœ‹åˆ°åŒæ ·çš„æ•ˆæœï¼Œä¸‹é¢çš„ä¾‹å­é€šè¿‡ `performSelector:` æ–¹æ³•è·å–ã€‚

- `recursiveDescription`ï¼šæ‰“å°æŸä¸ªè§†å›¾çš„å±‚çº§å…³ç³»ï¼›

```
<UIWindow: 0x7fdc86411aa0; frame = (0 0; 375 812); gestureRecognizers = <NSArray: 0x600000248a60>; layer = <UIWindowLayer: 0x600000239e80>>
```

- `_printHierarchy`ï¼šç›´æ¥è·å–å½“å‰æ˜¾ç¤ºçš„ `ViewController`ï¼Œä¸å¿…ä½¿ç”¨ `[view nextResponder]` è·å–å½“å‰æ˜¾ç¤ºçš„ viewControllerï¼›

```
<ViewController 0x7fdc86411270>, state: appeared, view: <UIView 0x7fdc867085e0>
```

- `_autolayoutTrace`ï¼šæ˜¯ recursiveDescription çš„ç²¾ç®€ç‰ˆï¼Œå¿½ç•¥äº†å…³äº View çš„æè¿°ä¿¡æ¯ï¼›

```
UIWindow:0x7fdc86411aa0
|   UIView:0x7fdc867085e0
```

- `_ivarDescription`ï¼šæ‰“å°æŸä¸ªå®ä¾‹çš„æ‰€æœ‰å˜é‡åå’Œå€¼ï¼›

```
<Lefex: 0x604000005a80>:
in Lefex:
	_name (NSString*): @"wsy"
in NSObject:
	isa (Class): Lefex (isa, 0x10cde9038)
```

- `_methodDescription`ï¼šæ‰“å°æŸä¸ªç±»çš„æ‰€æœ‰å±æ€§ï¼Œå®ä¾‹æ–¹æ³•ï¼Œç±»æ–¹æ³•ã€‚

```
<Lefex: 0x604000005a80>:
in Lefex:
	Class Methods:
		+ (id) trueName; (0x10cde6590)
	Properties:
		@property (copy, nonatomic) NSString* name;  (@synthesize name = _name;)
	Instance Methods:
		- (void) changeName; (0x10cde6580)
		- (void) .cxx_destruct; (0x10cde6620)
		- (id) name; (0x10cde65b0)
		- (void) setName:(id)arg1; (0x10cde65e0)
in NSObject:
	Class Methods:
	çœç•¥......
```

[å‚è€ƒ](http://iosre.com/t/powerful-private-methods-for-debugging-in-cycript-lldb/3414)

#### ğŸ’¯ä½¿ç”¨ NSInvocation è°ƒç”¨æ–¹æ³•

åœ¨é€†å‘ä¸­æƒ³è¦è°ƒç”¨åŸAPPä¸­å·²æœ‰ç±»çš„æ–¹æ³•æ—¶ï¼Œéœ€è¦é€šè¿‡ NSInvocation çš„æ–¹å¼è°ƒç”¨ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ã€‚

```objective-c
// è°ƒç”¨æŸä¸ªç±»æ–¹æ³•
NSString *title = [NSClassFromString(@"TTool") invoke:@"getFormatString:" arguments:@[item.title ?: @""]];

// è°ƒç”¨ç±»æ–¹æ³•ï¼Œå¹¶æ¨¡æ‹Ÿè¿›å…¥æŸä¸ªé¡µé¢
UIViewController *detailVC = [@"LEFEBookDetailsViewController" invokeClassMethod:@"alloc"];
[detailVC invoke:@"initWithBookId:type:" args:dataItem.bookId, @(dataItem.bookType), nil];
[detailVC invoke:@"view"];
[detailVC invoke:@"viewWillAppear:" args:@(0), nil];
[detailVC invoke:@"viewDidAppear:" args:@(0), nil];
```

[RuntimeInvoker](https://github.com/cyanzhong/RuntimeInvoker)

#### ğŸ’¯ èµ„æºæ–‡ä»¶éœ€è¦æ·»åŠ åˆ°ä¸»æ–‡ä»¶å¤¹ä¸­

```objective-c
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"word" ofType:@"json"];
// å¦‚æœæ·»åŠ åˆ° xxxDylib ä¸­ï¼Œèµ„æºæ–‡ä»¶å°†æ‰¾ä¸åˆ°
```

#### ğŸ’¯ å‘½ä»¤è¡Œ

```objective-c
1.æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶ Macch-Oçš„æ¶æ„
âœ  ~ file ~/Desktop/Mach-ODemo
/Users/wangsuyan/Desktop/Mach-ODemo: Mach-O universal binary with 2 architectures: [arm_v7:Mach-O executable arm_v7] [arm64:Mach-O 64-bit executable arm64]
/Users/wangsuyan/Desktop/Mach-ODemo (for architecture armv7):	Mach-O executable arm_v7
/Users/wangsuyan/Desktop/Mach-ODemo (for architecture arm64):	Mach-O 64-bit executable arm64

2.é€šè¿‡ --arch æŒ‡å®šæ‰€ä½¿ç”¨CPUçš„æ¶æ„
class-dump -a ~/Desktop/Mach-ODemo --arch armv7

3.æŸ¥çœ‹Mach-Oä¸­æŸä¸ªç±»ä¸­çš„å¤´æ–‡ä»¶
class-dump -C ViewController ~/Desktop/Mach-ODemo

4.æŸ¥æ‰¾Mach-Oä¸­æŸä¸ªæ–¹æ³•
class-dump -f name lefex ~/Desktop/Mach-ODemo
```

#### ğŸ’¯ æŸ¥çœ‹Appä¸­çš„å­—ç¬¦ä¸²

æœ‰æ—¶å€™æˆ‘ä»¬æƒ³æŸ¥çœ‹Appä¸­çš„ä¸€äº›å­—ç¬¦ä¸²çš„å€¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```objective-c
static NSString *kName = @"name lefex";
static const NSString *kNameConst = @"name lefex const";

NSString *name = [NSString stringWithFormat:@"%@ - %@", kName, kNameConst];
NSLog(@"name --- %@", name);

- (void)lefex {
    NSLog(@"Hello lefex");
}

__attribute__((constructor(101)))
void before101() {
    NSLog(@"before101");
}
```

ä½¿ç”¨å‘½ä»¤`xcrun otool -v -s __TEXT __cstring ~/Desktop/Mach-ODemo`ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºäº†ä¸Šé¢ä»£ç ä¸­å®šä¹‰çš„å­—ç¬¦ä¸²ã€‚è¿™æ¡å‘½ä»¤çš„ä½œç”¨æ˜¯æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶`__TEXT`æ®µå†…åä¸º`__cstring`çš„å†…å®¹ï¼Œ`~/Desktop/Mach-ODemo`æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼Œè·å–å¯æ‰§è¡Œæ–‡ä»¶çš„æ–¹å¼éå¸¸å¤šï¼Œå¯ä»¥æŸ¥çœ‹ä»¥å¾€çš„å°é›†ã€‚å¦‚æœä½ åªæ˜¯æƒ³çœ‹çœ‹æ•ˆæœï¼Œå¯ä»¥ä»è‡ªå·±é¡¹ç›®çš„ipaæ–‡ä»¶ä¸­æ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚:

```objective-c
/Users/lefex/Desktop/Mach-ODemo (architecture armv7):
Contents of (__TEXT,__cstring) section
0000b67d  Hello lefex
0000b689  before101
0000b693  before103
0000b69d  before102
0000b6a7  Hello destory
0000b6b5  %@
0000b6b8  Hello load
0000b6c3  name lefex
0000b6ce  name lefex const
```

è¿™æ˜¯ç›®å‰æˆ‘è§‰å¾—æœ€ç®€å•çš„ä¸€ç§æ–¹å¼ã€‚å¦‚æœä»£ç ä¸­æœ‰æ¯”è¾ƒé“­æ„Ÿçš„å†…å®¹ï¼Œåˆ‡è®°è¦ç»è¿‡ç‰¹æ®Šå¤„ç†ã€‚å¯æ‰§è¡Œæ–‡ä»¶ä¸­è¿˜æœ‰å¥½å¤šæœ‰è¶£çš„å†…å®¹ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥æ·±å…¥äº†è§£å¯æ‰§è¡Œæ–‡ä»¶ç©¶ç«Ÿéƒ½ä¿å­˜äº†å“ªäº›ä¿¡æ¯ã€‚

æŸ¥çœ‹å¾®ä¿¡çš„å¯æ‰§è¡Œæ–‡ä»¶å­—ç¬¦ä¸²å†…å®¹ï¼š`âœ  ~ xcrun otool -v -s __TEXT __cstring ~/Desktop/WeChat ->~/Desktop/wechts.log`

#### ğŸ’¯ UIDebug å·¥å…·

æŠŠ [**lib/LEFETopViewControllerMark.{h,m}**](https://github.com/lefex/iWeChat/tree/master/lib) æ–‡ä»¶å¯¼å…¥åˆ°ç”¨ MonkeyDev åˆ›å»ºçš„é¡¹ç›®ä¸­ï¼Œè¦æ·»åŠ åˆ° `xxxDylib`ä¸­ã€‚ç„¶åæ·»åŠ ä¸ªäº‹ä»¶ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶è°ƒç”¨æ–¹æ³•

` [LEFETopViewControllerMark  revealTopestViewControllerAndFrame]`

<img src="https://raw.githubusercontent.com/lefex/iWeChat/master/image/uidebug2.png" title="ç»§æ‰¿" width="300"/>

## ğŸ¼ä¸šåŠ¡é€»è¾‘

#### ğŸ’¯è¿˜åŸæŸäº›UIçš„è®¾è®¡

åˆ†ææŸä¸ª View æ˜¯å¦‚ä½•è®¾è®¡çš„å¹¶å®ç°å®ƒï¼Œæ¯”å¦‚å…¸å‹çš„ `ActionSheet`ï¼Œå¯ä»¥æ ¹æ®å¤´æ–‡ä»¶æ¥è¿˜åŸå®ƒçš„å®ç°ï¼›èŠå¤©ä¸­çš„æ°”æ³¡æœ‰å¾ˆå¤šï¼Œæœ‰éå¸¸å¤šçš„ Cellï¼Œé‚£ä¹ˆè¿™ç§ç»“æ„æ˜¯å¦‚ä½•è®¾è®¡çš„å‘¢ï¼Ÿ

#### ğŸ’¯æ¢ç´¢å„ä¸ªæ¨¡å—ä¸šåŠ¡é€»è¾‘

PM å¸¸è¯´ï¼ŒæŒ‰ç…§å¾®ä¿¡çš„åŠ å¥½å‹é€»è¾‘å®ç°å°±è¡Œï¼Œæ“¦ï¼Œä½ æœ‰è€ƒè™‘åˆ°å¾®ä¿¡åŠ å¥½å‹èƒŒåè¿˜æœ‰å“ªäº›ä½ æ‰€ä¸çŸ¥é“çš„é€»è¾‘å—ï¼Ÿ

#### ğŸ’¯æ¶ˆæ¯ç±»å‹

[å¾®ä¿¡æ¶ˆæ¯ç±»å‹](https://github.com/lefex/iWeChat/blob/master/MESSAGE.md)

#### ğŸ’¯æ–‡ä»¶è¯´æ˜


- `iConsoleWindow` æ˜¾ç¤ºçš„ä¸» Window
- `WAWeb` ä¸ºå¾®ä¿¡å°ç¨‹åºç±»
- `YYWAWebView : WKWebView` ä¸ºå¾®ä¿¡å°ç¨‹åºçš„ WebView



## ğŸ¦é”™è¯¯æ€»ç»“

- **æ–°å»ºæ–‡ä»¶åæŠ¥é”™**

```verilog
entry point (_main) undefined. for architecture arm64
// æ–°å»ºæ–‡ä»¶æ—¶ï¼Œéœ€è¦æŠŠæ–‡ä»¶å»ºåˆ° xxxDylib ä¸­ï¼Œä¸èƒ½é€‰æ‹© Target
```

- **ä¿®æ”¹ç”µè„‘æ—¶é—´è¿è¡ŒæŠ¥é”™**

```objective-c
CodeSign /Users/wangsuyan/Library/Developer/Xcode/DerivedData/TVideo-hamzrgdkjpjxzwaloktqyzqrckpm/Build/Products/Debug-iphoneos/libTVideoDylib.dylib
    cd /Users/wangsuyan/Desktop/baidu/reverse/TVideo
    export CODESIGN_ALLOCATE=/Users/wangsuyan/Desktop/Xcode9.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/codesign_allocate
    export PATH="/Users/wangsuyan/Desktop/Xcode9.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Users/wangsuyan/Desktop/Xcode9.app/Contents/Developer/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    
Signing Identity:     "iPhone Developer: xx (xxx)"

    /usr/bin/codesign --force --sign CE05AADAA82C40AD173C44316B410B221A24C9AB --entitlements /Users/wangsuyan/Library/Developer/Xcode/DerivedData/TVideo-hamzrgdkjpjxzwaloktqyzqrckpm/Build/Intermediates.noindex/TVideo.build/Debug-iphoneos/TVideoDylib.build/libTVideoDylib.dylib.xcent --timestamp=none /Users/wangsuyan/Library/Developer/Xcode/DerivedData/TVideo-hamzrgdkjpjxzwaloktqyzqrckpm/Build/Products/Debug-iphoneos/libTVideoDylib.dylib

CE05AADAA82C40AD173C44316B410B221A24C9AB: no identity found
Command /usr/bin/codesign failed with exit code 1
// è¿™ä¸ªé”™è¯¯æ˜¯ä¿®æ”¹äº†ç”µè„‘æ—¶é—´
```



## ğŸ™ˆå¥½æ–‡æ¨è

å·²ç»æœ‰ä¸å°‘åŒå­¦å¯¹å¾®ä¿¡æœ‰ä¸€äº›æ¢ç´¢ï¼ŒæŠŠæˆ‘ä»¬è®¤ä¸ºæ¯”è¾ƒå¥½çš„æ–‡ç« æ¨èåˆ°è¿™é‡Œï¼š

- [**WeChatRedEnvelop æŠ¢çº¢åŒ…**  ](https://github.com/buginux/WeChatRedEnvelop)
- [**WeChatPlugin-MacOS Macå¾®ä¿¡æ’ä»¶**  ](https://github.com/TKkk-iOSer/WeChatPlugin-MacOS)
- [**MonkeyDev**](https://github.com/AloneMonkey/MonkeyDev/wiki/%E9%9D%9E%E8%B6%8A%E7%8B%B1App%E9%9B%86%E6%88%90)
- [**ç»™å¾®ä¿¡æ·»åŠ èŠå¤©è®°å½•æˆªå›¾åŠŸèƒ½**](https://mp.weixin.qq.com/s/TpwZtPu0DKOwm2d6B9fTmg)
- [**æ·±å…¥iOSç³»ç»Ÿåº•å±‚ä¹‹æ±‡ç¼–è¯­è¨€**](https://www.jianshu.com/p/365ed6c385e5)


## å…è´£å£°æ˜

æœ¬é¡¹ç›®æ—¨åœ¨å­¦ä¹ å¾®ä¿¡çš„è®¾è®¡ï¼Œä¸å¯ç”¨äºå•†ä¸šå’Œä¸ªäººå…¶ä»–æ„å›¾ã€‚è‹¥ä½¿ç”¨ä¸å½“ï¼Œè¯·ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚é€†å‘å¾®ä¿¡æ—¶å¯èƒ½ä¼šæœ‰è¢«å°å·çš„å±é™©ï¼Œé‡åˆ°å¾®ä¿¡çš„æé†’åå»ºè®®ç«‹å³åœæ­¢ä½¿ç”¨ã€‚
